{%extends "customer_layout.html"%} <!--Inherited all nav features-->
{%block content%}

{%if customer.status != 'Blocked'%}
<div style="text-align: center;">
  <p style="margin: auto ;"><b>Which service are you looking for?</b> </p>
  </div>
        <div class="row row-cols-1 row-cols-md-4 g-4" style="margin: auto;">
          {%for service in services%}
          <div class="col">
              <div class="card h-100" style="height: 200px;">
                <a href="/customer/{{service.id}}/service_professionals/{{uid}}/{{uname}}"><img src="..." class="card-img-top" alt="Image of {{service.name}}">
                <div class="card-body">
                  <h5 class="card-title">{{service.name}}</h5></a>
                  <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                </div>
              </div>
        </div>
          {%endfor%}
        </div>
    {%else%}
    <div style="text-align: center;">
      <h2 style="margin: auto ;">Sorry, you are blocked! Please contact admin.  </h2>
      </div>
      {%endif%}
        <div style="text-align: center;">
          <p style="margin: auto ;"><b>Service Request History</b> </p>
          </div>
          {% if service_requests %}
      
                      <div style="width:1000px; height:150px; overflow-y:auto;margin: auto;margin-bottom: 10px; text-align: center; border: 1px solid black;">
                    
                        <table cellspacing="0" cellpadding="1" border="1" width="980" style="margin: auto;">
                          <tr style="color:white;background-color:grey;text-align: center;position: sticky;">
                            <th>Sl No.</th>
                            <th>Customer Name</th>
                            <th>Service Name</th>
                            <th>Professional Since</th>
                            <th>Price</th>
                            <th>Customer Location</th>
                            <th>Pincode</th>
                            <th>Date of request</th>
                            <th>Date of schedule</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                          {% for sr in service_requests %} 
                        <tr>
                            <td><a href="/customer/sr_details/{{sr.id}}/{{uid}}/{{uname}}">{{loop.index}}</a></td>
                            
                            <td>{{sr.service.name}}</td>
                            <td>{{sr.service_professional.name}}</td>
                            <td>INR {{sr.service_professional.price}}</td>
                            <td>{{sr.customer.location}}</td>
                            <td>{{sr.customer.pin_code}}</td>
                            <td>{{sr.date_of_request}}</td>
                            <td>{{sr.date_of_schedule}}</td>
                            <td>{{sr.status}}</td>
                            <td>
                              {%if sr.status == 'Requested'%}
                              <a href="#" type="button" class="btn btn-outline-secondary">No Action</a>
                              
                              {%elif sr.status == 'Assigned'%}
              
                              <a href="#" type="button" class="btn btn-outline-primary">Assigned</a>
                              <a href="/customer/update_sr/{{sr.id}}/{{uid}}/{{uname}}" type="button" class="btn btn-success">Close?</a>
                              {%endif%}
                            </td>
                        </tr>
                        {% endfor %}
                        </table>
                        {% else %}
                      
                      <div style="margin: auto;text-align: center;border: 1px;"><h2>No service requests!</h2></div>
                    {% endif %}
                    

{%endblock%}